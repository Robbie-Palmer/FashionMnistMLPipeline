schema: '2.0'
stages:
  download_train_data:
    cmd: python fashmnistmlpipeline/download_data.py True processed
    deps:
    - path: fashmnistmlpipeline/download_data.py
      md5: 79cbb6395739016bac9a0f22c870b6ad
      size: 895
    outs:
    - path: data/FashionMNIST/processed
      md5: 971edf6f90eb4eb4fa15271f159245b0.dir
      size: 30329107
      nfiles: 60000
    - path: data/FashionMNIST/raw
      md5: ccdd6829f21df1a9b1ef43481ea19b4e.dir
      size: 85828693
      nfiles: 8
  train_model:
    cmd: python fashmnistmlpipeline/train.py
    deps:
    - path: data/FashionMNIST/processed
      md5: 971edf6f90eb4eb4fa15271f159245b0.dir
      size: 30329107
      nfiles: 60000
    - path: fashmnistmlpipeline/train.py
      md5: 3b853d8b9e6af8a2afef80a31364ee1d
      size: 2472
    params:
      fashmnistmlpipeline/params.yml:
        train:
          seed: 42
          pretrained: true
          valid_pct_split: 0.2
          num_epochs: 2
          architecture: resnet18
          metric_target_average_fn: weighted
    outs:
    - path: data/model/actual_vs_predicted.csv
      md5: 6588e6b23f5984e026f8fc026daa4157
      size: 48017
    - path: data/model/learner.pkl
      md5: 4d59275cd1543b54b751959c7a547043
      size: 50183174
    - path: data/model/model.pth
      md5: c6ba324ba308cc4f3bda2b9a68211811
      size: 46929017
    - path: data/model/results.json
      md5: 275a074cf371180da3c1848871aa1735
      size: 335
  download_test_data:
    cmd: python fashmnistmlpipeline/download_data.py False test
    outs:
    - path: data/FashionMNIST/test
      md5: bea5035908b576882383dabdbddbe162.dir
      size: 5072560
      nfiles: 10000
  evaluate:
    cmd: python fashmnistmlpipeline/evaluate.py
    deps:
    - path: data/FashionMNIST/test
      md5: bea5035908b576882383dabdbddbe162.dir
      size: 5072560
      nfiles: 10000
    - path: data/model/learner.pkl
      md5: 4d59275cd1543b54b751959c7a547043
      size: 50183174
    - path: fashmnistmlpipeline/evaluate.py
      md5: 48d633174614473aebb1bf31ed9676e6
      size: 1064
    outs:
    - path: data/model/test_actual_vs_predicted.csv
      md5: 4e9f770345740a4e6aed5c9631606165
      size: 40017
    - path: data/model/test_results.json
      md5: 2661ae6e7e80f5ddc50dce1023436d12
      size: 310
